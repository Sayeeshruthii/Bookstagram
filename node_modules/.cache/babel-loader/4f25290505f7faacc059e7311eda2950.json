{"ast":null,"code":"import _slicedToArray from\"C:/Users/sayee/Documents/Adv Sw Engg/BookHUB/frontend-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axiosMain from'../../http/axios/axios_main';import{toast}from'react-toastify';import{Row,Col,Container}from\"reactstrap\";// import \"bootstrap/dist/css/bootstrap.css\";\n// import \"font-awesome/css/font-awesome.min.css\";\nimport{withRouter}from'react-router';import Sidebar from'../../components/Sidebar/Sidebar';import Header from'../../components/Header/Header';var AddFriends=function AddFriends(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),addfriend=_useState4[0],setAddFriend=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),errValue=_useState6[0],setErrValue=_useState6[1];useEffect(function(){console.log(\"From:\",props);getSearchFriendList();},[addfriend]);var getSearchFriendList=function getSearchFriendList(){var userId=localStorage.getItem('userId');axiosMain.get('/allfriend/'+'?pk='+userId).then(function(response){if(response.status===200){console.log(\"RESPONSE\",response.data);setData(response.data);toast.success(\"User Profile Fetch Successful\",{position:'top-right',autoClose:3000,hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}}).catch(function(error){setErrValue(error);console.error('Error',error);setErrValue(\"This User Profile Fetch Failed\");});};var addFriendHandler=function addFriendHandler(friendId){var userId=localStorage.getItem('userId');axiosMain.post('/friend/',{user:userId,friend:friendId,relationship:\"addfriend\"}).then(function(response){if(response.status===200){console.log(\"RESPONSE\",response.data);setAddFriend(response.data);toast.success(\"User Profile Fetch Successful\",{position:'top-right',autoClose:3000,hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}}).catch(function(error){setErrValue(error);console.error('Error',error);setErrValue(\"This User Profile Fetch Failed\");});};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"people-nearby\",children:data.length>=1&&data.map(function(_ref,index){var id=_ref.id,first_name=_ref.first_name,usertype=_ref.usertype,country=_ref.country;return/*#__PURE__*/_jsx(\"div\",{className:\"nearby-user\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2 col-sm-2\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://bootdey.com/img/Content/avatar/avatar7.png\",alt:\"user\",className:\"profile-photo-lg\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-7 col-sm-7\",children:[/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"profile-link\",children:first_name})}),/*#__PURE__*/_jsx(\"p\",{children:usertype}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:country})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 col-sm-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary pull-right\",onClick:function onClick(e){addFriendHandler(id);},children:\"Add Friend\"})})]})});})})})})})]});};export default withRouter(AddFriends);","map":{"version":3,"sources":["C:/Users/sayee/Documents/Adv Sw Engg/BookHUB/frontend-react/src/views/AddFriends/AddFriends.js"],"names":["React","useState","useEffect","Link","axiosMain","toast","Row","Col","Container","withRouter","Sidebar","Header","AddFriends","props","data","setData","addfriend","setAddFriend","errValue","setErrValue","console","log","getSearchFriendList","userId","localStorage","getItem","get","then","response","status","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","catch","error","addFriendHandler","friendId","post","user","friend","relationship","length","map","index","id","first_name","usertype","country","e"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axiosMain from '../../http/axios/axios_main';\r\nimport { toast } from 'react-toastify';\r\nimport { Row, Col, Container } from \"reactstrap\";\r\n// import \"bootstrap/dist/css/bootstrap.css\";\r\n// import \"font-awesome/css/font-awesome.min.css\";\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Sidebar from '../../components/Sidebar/Sidebar';\r\nimport Header from '../../components/Header/Header';\r\n\r\n\r\nconst AddFriends = props => {\r\n\r\n    const [data, setData] = useState([]);\r\n    const [addfriend, setAddFriend] = useState([]);\r\n\r\n    const [errValue, setErrValue] = useState();\r\n\r\n    useEffect(() => {\r\n        console.log(\"From:\", props);\r\n        getSearchFriendList();\r\n    }, [addfriend]);\r\n\r\n    const getSearchFriendList = () => {\r\n        const userId = localStorage.getItem('userId');\r\n        axiosMain\r\n            .get('/allfriend/' + '?pk=' + userId)\r\n            .then(response => {\r\n                if (response.status === 200) {\r\n                    console.log(\"RESPONSE\", response.data)\r\n                    setData(response.data);\r\n                    toast.success(`User Profile Fetch Successful`, {\r\n                        position: 'top-right',\r\n                        autoClose: 3000,\r\n                        hideProgressBar: true,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                setErrValue(error);\r\n                console.error('Error', error);\r\n                setErrValue(\"This User Profile Fetch Failed\")\r\n            });\r\n    };\r\n\r\n    const addFriendHandler = (friendId) => {\r\n        const userId = localStorage.getItem('userId');\r\n\r\n        axiosMain\r\n            .post('/friend/', {\r\n                user: userId,\r\n                friend: friendId,\r\n                relationship: \"addfriend\"\r\n            })\r\n            .then(response => {\r\n                if (response.status === 200) {\r\n                    console.log(\"RESPONSE\", response.data);\r\n                    setAddFriend(response.data);\r\n                    toast.success(`User Profile Fetch Successful`, {\r\n                        position: 'top-right',\r\n                        autoClose: 3000,\r\n                        hideProgressBar: true,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                setErrValue(error);\r\n                console.error('Error', error);\r\n                setErrValue(\"This User Profile Fetch Failed\")\r\n            });\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <Header />\r\n            <Sidebar />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <br />\r\n\r\n            <Container>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"people-nearby\">\r\n                            {data.length >= 1 && data.map(({ id, first_name, usertype, country }, index) => (\r\n                                < div className=\"nearby-user\" >\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-md-2 col-sm-2\">\r\n                                            <img src='https://bootdey.com/img/Content/avatar/avatar7.png' alt=\"user\" className=\"profile-photo-lg\" />\r\n                                        </div>\r\n                                        <div className=\"col-md-7 col-sm-7\">\r\n                                            <h5><a href=\"#\" className=\"profile-link\">{first_name}</a></h5>\r\n                                            <p>{usertype}</p>\r\n                                            <p className=\"text-muted\">{country}</p>\r\n                                        </div>\r\n                                        <div className=\"col-md-3 col-sm-3\">\r\n                                            <button\r\n                                                className=\"btn btn-primary pull-right\"\r\n                                                onClick={(e) => { addFriendHandler(id) }}\r\n                                            >\r\n                                                Add Friend\r\n                                            </button>\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </Container >\r\n\r\n        </React.Fragment >\r\n\r\n    );\r\n}\r\nexport default withRouter(AddFriends);\r\n\r\n"]},"metadata":{},"sourceType":"module"}