{"ast":null,"code":"import _slicedToArray from\"C:/Users/sayee/Documents/Adv Sw Engg/BookHUB/frontend-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/Users/sayee/Documents/Adv Sw Engg/BookHUB/frontend-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/sayee/Documents/Adv Sw Engg/BookHUB/frontend-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import Sidebar from'../../components/Sidebar/Sidebar';import Header from'../../components/Header/Header';//import SettingsHeader from '../../components/SettingsHeader';\nimport{withRouter}from'react-router';import{toast}from'react-toastify';import profileImage from'../../assets/images/profile/2.png';import axiosMain from'../../http/axios/axios_main';import{date}from'yup';var Settings=function Settings(){useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);})));var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),emailValue=_useState4[0],setEmailValue=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),dpValue=_useState6[0],setDp=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),passwordValue=_useState8[0],setPasswordValue=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),usernameValue=_useState10[0],setUsernameValue=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),contactValue=_useState12[0],setContactValue=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),countryValue=_useState14[0],setCountryValue=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),firstnameValue=_useState16[0],setFirstnameValue=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),lastnameValue=_useState18[0],setLastnameValue=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),usertypeValue=_useState20[0],setUsertypeValue=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),errValue=_useState22[0],setErrValue=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),updateValue=_useState24[0],setUpdateValue=_useState24[1];useEffect(function(){getUserProfile();},[]);var getUserProfile=function getUserProfile(){var userId=localStorage.getItem('userId');console.log(\"UserId\",userId);axiosMain.get('/user/'+userId+'/').then(function(response){if(response.status===200){console.log(\"RESPONSE\",response);setData(response.data);setUsernameValue(response.data.username);setPasswordValue(response.data.password);setEmailValue(response.data.email);setContactValue(response.data.contact);setFirstnameValue(response.data.first_name);setCountryValue(response.data.country);setLastnameValue(response.data.last_name);setUsertypeValue(response.data.usertype);toast.success(\"User Profile Fetch Successful\",{position:'top-right',autoClose:3000,hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}}).catch(function(error){setErrValue(error);console.error('Error',error);setErrValue(\"This User Profile Fetch Failed\");});};var handleUpdate=function handleUpdate(e){e.preventDefault();// updateProfileAPI();\nvar userId=localStorage.getItem('userId');console.log(\"UserId\",userId);axiosMain.put('/user/'+userId+'/',{user:data.user,username:usernameValue,password:passwordValue,country:countryValue,email:emailValue,contact:contactValue,first_name:firstnameValue,last_name:lastnameValue,usertype:usertypeValue,dp:dpValue}).then(function(response){if(response.status===200){console.log(\"Response\",response);toast.success(\"Update Successful\",{position:'top-right',autoClose:3000,hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});setUpdateValue(true);// window.location.reload(false);\n}}).catch(function(error){console.error('Error',error);setErrValue(\"This Email is already registered on the platform\");});};var onImageChange=function onImageChange(event){if(event.target.files&&event.target.files[0]){var reader=new FileReader();reader.onload=function(e){setDp({image:e.target.result});};reader.readAsDataURL(event.target.files[0]);}};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"content-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-xxl-12 col-xl-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-title\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Profile\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xxl-6 col-xl-6 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[updateValue?/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",style:{color:\"blue\"},children:\"Update Successful\"}):null,/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"User Profile\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"form\",{action:\"#\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-xxl-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"User Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"username\",value:usernameValue,onChange:function onChange(e){setUsernameValue(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xxl-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"mr-3 rounded-circle mr-0 mr-sm-3\",src:profileImage,width:\"55\",height:\"55\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-body\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0\",children:usernameValue}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Max file size is 20mb\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xxl-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-file-input\",id:\"customFile\",onChange:function onChange(e){onImageChange(e);}}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-file-label\",for:\"customFile\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"form-file-text\",children:\"Choose file...\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form-file-button\",children:\"Browse\"})]})]})})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xxl-6 col-xl-6 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"User Profile\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"form\",{action:\"#\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-xxl-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"New Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Email\",value:emailValue,onChange:function onChange(e){setEmailValue(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xxl-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"**********\",onChange:function onChange(e){setPasswordValue(e.target.value);}})]})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xxl-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"Personal Information\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"form\",{method:\"post\",name:\"myform\",className:\"personal_validate\",novalidate:\"novalidate\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-xxl-6 col-xl-6 col-lg-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Contact Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"+91\",name:\"contact\",value:contactValue,onChange:function onChange(e){setContactValue(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xxl-6 col-xl-6 col-lg-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Dishant\",name:\"firstname\",value:firstnameValue,onChange:function onChange(e){setFirstnameValue(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xxl-6 col-xl-6 col-lg-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Shah\",name:\"lastname\",value:lastnameValue,onChange:function onChange(e){setLastnameValue(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xxl-6 col-xl-6 col-lg-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Country\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"India\",name:\"country\",value:countryValue,onChange:function onChange(e){setCountryValue(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xxl-6 col-xl-6 col-lg-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"User Type\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"usertype\",value:usertypeValue,onChange:function onChange(e){setUsertypeValue(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success pl-5 pr-5 waves-effect\",onClick:function onClick(e){return handleUpdate(e);},children:\"Save\"})})]})})})]})})]})})})]})})})})]});};export default Settings;","map":{"version":3,"sources":["C:/Users/sayee/Documents/Adv Sw Engg/BookHUB/frontend-react/src/views/Settings/Settings.js"],"names":["React","useState","useEffect","Link","useDispatch","useSelector","Sidebar","Header","withRouter","toast","profileImage","axiosMain","date","Settings","data","setData","emailValue","setEmailValue","dpValue","setDp","passwordValue","setPasswordValue","usernameValue","setUsernameValue","contactValue","setContactValue","countryValue","setCountryValue","firstnameValue","setFirstnameValue","lastnameValue","setLastnameValue","usertypeValue","setUsertypeValue","errValue","setErrValue","updateValue","setUpdateValue","getUserProfile","userId","localStorage","getItem","console","log","get","then","response","status","username","password","email","contact","first_name","country","last_name","usertype","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","catch","error","handleUpdate","e","preventDefault","put","user","dp","onImageChange","event","target","files","reader","FileReader","onload","image","result","readAsDataURL","color","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Sidebar from '../../components/Sidebar/Sidebar';\r\nimport Header from '../../components/Header/Header';\r\n//import SettingsHeader from '../../components/SettingsHeader';\r\nimport { withRouter } from 'react-router';\r\nimport { toast } from 'react-toastify';\r\nimport profileImage from '../../assets/images/profile/2.png';\r\n\r\nimport axiosMain from '../../http/axios/axios_main';\r\nimport { date } from 'yup';\r\n\r\nconst Settings = () => {\r\n\r\n    useEffect(async () => {\r\n    });\r\n\r\n    const [data, setData] = useState({});\r\n    const [emailValue, setEmailValue] = useState();\r\n    const [dpValue, setDp] = useState();\r\n    const [passwordValue, setPasswordValue] = useState();\r\n    const [usernameValue, setUsernameValue] = useState();\r\n    const [contactValue, setContactValue] = useState();\r\n    const [countryValue, setCountryValue] = useState();\r\n    const [firstnameValue, setFirstnameValue] = useState();\r\n    const [lastnameValue, setLastnameValue] = useState();\r\n    const [usertypeValue, setUsertypeValue] = useState();\r\n\r\n    const [errValue, setErrValue] = useState();\r\n    const [updateValue, setUpdateValue] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        getUserProfile();\r\n    }, []);\r\n\r\n    const getUserProfile = () => {\r\n        const userId = localStorage.getItem('userId');\r\n        console.log(\"UserId\", userId);\r\n        axiosMain\r\n            .get('/user/' + userId + '/')\r\n            .then(response => {\r\n                if (response.status === 200) {\r\n                    console.log(\"RESPONSE\", response)\r\n                    setData(response.data);\r\n                    setUsernameValue(response.data.username);\r\n                    setPasswordValue(response.data.password);\r\n                    setEmailValue(response.data.email);\r\n                    setContactValue(response.data.contact);\r\n                    setFirstnameValue(response.data.first_name);\r\n                    setCountryValue(response.data.country);\r\n                    setLastnameValue(response.data.last_name);\r\n                    setUsertypeValue(response.data.usertype);\r\n\r\n                    toast.success(`User Profile Fetch Successful`, {\r\n                        position: 'top-right',\r\n                        autoClose: 3000,\r\n                        hideProgressBar: true,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                setErrValue(error);\r\n                console.error('Error', error);\r\n                setErrValue(\"This User Profile Fetch Failed\")\r\n            });\r\n    };\r\n\r\n\r\n    const handleUpdate = (e) => {\r\n        e.preventDefault();\r\n        // updateProfileAPI();\r\n        const userId = localStorage.getItem('userId');\r\n        console.log(\"UserId\", userId);\r\n        axiosMain\r\n            .put('/user/' + userId + '/', {\r\n                user: data.user,\r\n                username: usernameValue,\r\n                password: passwordValue,\r\n                country: countryValue,\r\n                email: emailValue,\r\n                contact: contactValue,\r\n                first_name: firstnameValue,\r\n                last_name: lastnameValue,\r\n                usertype: usertypeValue,\r\n                dp: dpValue\r\n            })\r\n            .then(response => {\r\n                if (response.status === 200) {\r\n                    console.log(\"Response\", response)\r\n                    toast.success(`Update Successful`, {\r\n                        position: 'top-right',\r\n                        autoClose: 3000,\r\n                        hideProgressBar: true,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                    });\r\n\r\n                    setUpdateValue(true);\r\n                    // window.location.reload(false);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('Error', error);\r\n                setErrValue(\"This Email is already registered on the platform\");\r\n            });\r\n    }\r\n\r\n    const onImageChange = (event) => {\r\n        if (event.target.files && event.target.files[0]) {\r\n            let reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                setDp({ image: e.target.result });\r\n            };\r\n            reader.readAsDataURL(event.target.files[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Header />\r\n            <Sidebar />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <div className=\"content-body\">\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-xxl-12 col-xl-12\">\r\n                            <div className=\"page-title\">\r\n                                <h4>Profile</h4>\r\n                            </div>\r\n                            <div className=\"card\">\r\n\r\n                                <div className=\"card-body\">\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-xxl-6 col-xl-6 col-lg-6\">\r\n                                            <div className=\"card\">\r\n                                                <div className=\"card-header\">\r\n                                                    {updateValue ?\r\n                                                        <h4\r\n                                                            className=\"card-title\"\r\n                                                            style={{ color: \"blue\" }}>Update Successful</h4>\r\n                                                        :\r\n                                                        null\r\n                                                    }\r\n                                                    <h4 className=\"card-title\">User Profile</h4>\r\n                                                </div>\r\n                                                <div className=\"card-body\">\r\n                                                    <form action=\"#\">\r\n                                                        <div className=\"row g-3\">\r\n                                                            <div className=\"col-xxl-12\">\r\n                                                                <label className=\"form-label\">User Name</label>\r\n                                                                <input\r\n                                                                    type=\"text\" className=\"form-control\" placeholder=\"username\"\r\n                                                                    value={usernameValue}\r\n                                                                    onChange={(e) => { setUsernameValue(e.target.value) }}\r\n                                                                />\r\n                                                            </div>\r\n                                                            <div className=\"col-xxl-12\">\r\n                                                                <div className=\"d-flex align-items-center\">\r\n                                                                    <img className=\"mr-3 rounded-circle mr-0 mr-sm-3\"\r\n                                                                        src={profileImage} width=\"55\" height=\"55\"\r\n                                                                        alt=\"\" />\r\n                                                                    <div className=\"media-body\">\r\n                                                                        <h4 className=\"mb-0\">{usernameValue}</h4>\r\n                                                                        <p className=\"mb-0\">Max file size is 20mb\r\n                                                                    </p>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div className=\"col-xxl-12\">\r\n                                                                <div className=\"form-file\">\r\n                                                                    <input\r\n                                                                        type=\"file\"\r\n                                                                        className=\"form-file-input\"\r\n                                                                        id=\"customFile\"\r\n                                                                        onChange={(e) => { onImageChange(e) }}\r\n                                                                    />\r\n                                                                    <label className=\"form-file-label\" for=\"customFile\">\r\n                                                                        <span className=\"form-file-text\">Choose file...</span>\r\n                                                                        <span className=\"form-file-button\">Browse</span>\r\n                                                                    </label>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </form>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-xxl-6 col-xl-6 col-lg-6\">\r\n                                            <div className=\"card\">\r\n                                                <div className=\"card-header\">\r\n                                                    <h4 className=\"card-title\">User Profile</h4>\r\n                                                </div>\r\n                                                <div className=\"card-body\">\r\n                                                    <form action=\"#\">\r\n                                                        <div className=\"row g-3\">\r\n                                                            <div className=\"col-xxl-12\">\r\n                                                                <label className=\"form-label\">New Email</label>\r\n                                                                <input\r\n                                                                    type=\"email\" className=\"form-control\"\r\n                                                                    placeholder=\"Email\"\r\n                                                                    value={emailValue}\r\n                                                                    onChange={(e) => { setEmailValue(e.target.value) }} />\r\n                                                            </div>\r\n                                                            <div className=\"col-xxl-12\">\r\n                                                                <label className=\"form-label\">New Password</label>\r\n                                                                <input\r\n                                                                    type=\"password\" className=\"form-control\"\r\n                                                                    placeholder=\"**********\"\r\n                                                                    onChange={(e) => { setPasswordValue(e.target.value) }} />\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </form>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-xxl-12\">\r\n                                            <div className=\"card\">\r\n                                                <div className=\"card-header\">\r\n                                                    <h4 className=\"card-title\">Personal Information</h4>\r\n                                                </div>\r\n                                                <div className=\"card-body\">\r\n                                                    <form method=\"post\" name=\"myform\" className=\"personal_validate\"\r\n                                                        novalidate=\"novalidate\">\r\n                                                        <div className=\"row g-4\">\r\n                                                            <div className=\"col-xxl-6 col-xl-6 col-lg-6\">\r\n                                                                <label className=\"form-label\">Contact Number</label>\r\n                                                                <input\r\n                                                                    type=\"text\" className=\"form-control\"\r\n                                                                    placeholder=\"+91\" name=\"contact\"\r\n                                                                    value={contactValue}\r\n                                                                    onChange={(e) => { setContactValue(e.target.value) }} />\r\n                                                            </div>\r\n                                                            {/* <div className=\"col-xxl-6 col-xl-6 col-lg-6\">\r\n                                                                <label className=\"form-label\">Email</label>\r\n                                                                <input\r\n                                                                    type=\"email\" className=\"form-control\"\r\n                                                                    placeholder=\"Hello@example.com\"\r\n                                                                    name=\"email\"\r\n                                                                    value={data.email}\r\n                                                                    onChange={(e) => { setData({ \"email\": e.target.value }) }} />\r\n                                                            </div> */}\r\n                                                            {/* <div className=\"col-xxl-6 col-xl-6 col-lg-6\">\r\n                                                                <label className=\"form-label\">Date of birth</label>\r\n                                                                <input type=\"text\" className=\"form-control hasDatepicker\"\r\n                                                                    placeholder=\"10-10-2020\" id=\"datepicker\"\r\n                                                                    autocomplete=\"off\" name=\"dob\" />\r\n                                                            </div> */}\r\n                                                            <div className=\"col-xxl-6 col-xl-6 col-lg-6\">\r\n                                                                <label className=\"form-label\">First Name</label>\r\n                                                                <input\r\n                                                                    type=\"text\" className=\"form-control\"\r\n                                                                    placeholder=\"Dishant\"\r\n                                                                    name=\"firstname\"\r\n                                                                    value={firstnameValue}\r\n                                                                    onChange={(e) => { setFirstnameValue(e.target.value) }} />\r\n                                                            </div>\r\n                                                            <div className=\"col-xxl-6 col-xl-6 col-lg-6\">\r\n                                                                <label className=\"form-label\">Last Name</label>\r\n                                                                <input\r\n                                                                    type=\"text\" className=\"form-control\"\r\n                                                                    placeholder=\"Shah\"\r\n                                                                    name=\"lastname\"\r\n                                                                    value={lastnameValue}\r\n                                                                    onChange={(e) => { setLastnameValue(e.target.value) }} />\r\n                                                            </div>\r\n                                                            <div className=\"col-xxl-6 col-xl-6 col-lg-6\">\r\n                                                                <label className=\"form-label\">Country</label>\r\n                                                                <input\r\n                                                                    type=\"text\" className=\"form-control\"\r\n                                                                    placeholder=\"India\" name=\"country\"\r\n                                                                    value={countryValue}\r\n                                                                    onChange={(e) => { setCountryValue(e.target.value) }} />\r\n                                                            </div>\r\n                                                            <div className=\"col-xxl-6 col-xl-6 col-lg-6\">\r\n                                                                <label className=\"form-label\">User Type</label>\r\n                                                                <input\r\n                                                                    type=\"text\" className=\"form-control\" name=\"usertype\"\r\n                                                                    value={usertypeValue}\r\n                                                                    onChange={(e) => { setUsertypeValue(e.target.value) }}>\r\n\r\n                                                                </input>\r\n                                                            </div>\r\n\r\n                                                            <div className=\"col-12\">\r\n                                                                <button\r\n                                                                    className=\"btn btn-success pl-5 pr-5 waves-effect\"\r\n                                                                    onClick={(e) => handleUpdate(e)}\r\n                                                                >\r\n                                                                    Save\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </form>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default Settings;"]},"metadata":{},"sourceType":"module"}